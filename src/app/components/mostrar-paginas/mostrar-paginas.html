<div class="container">
   <div class="header-navigation">
    <button (click)="voltar()" class="btn-voltar">
      â† Voltar
    </button>
  </div>
    <h1>Gerenciamento</h1>

  <!-- Status Cards -->
  <div class="status-cards">
    <div class="status-card">
      <div class="status-icon">ğŸ“„</div>
      <div class="status-info">
        <div class="status-label">Total de PÃ¡ginas</div>
        <div class="status-value">{{ totalPaginasContagem }}</div>
      </div>
    </div>

    <div class="status-card">
      <div class="status-icon">âœ…</div>
      <div class="status-info">
        <div class="status-label">Com Dados</div>
        <div class="status-value">{{ paginasComDados }}</div>
      </div>
    </div>

    <div class="status-card">
      <div class="status-icon">â³</div>
      <div class="status-info">
        <div class="status-label">Em Branco</div>
        <div class="status-value">{{ paginasEmBranco }}</div>
      </div>
    </div>

    <div class="status-card">
      <div class="status-icon">ğŸ”</div>
      <div class="status-info">
        <div class="status-label">Filtradas</div>
        <div class="status-value">{{ paginasFiltradasContagem }}</div>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filtros">
    <h3>ğŸ” Filtros</h3>
    <div class="filtros-grid">
      <div class="filtro-item">
        <label for="filtroNome">Nome</label>
        <input
          type="text"
          id="filtroNome"
          [(ngModel)]="filtroNome"
          placeholder="Filtrar por nome..."
          (input)="filtrarPaginas()"
        />
      </div>

      <div class="filtro-item">
        <label for="filtroSerialKey">Serial Key</label>
        <input
          type="text"
          id="filtroSerialKey"
          [(ngModel)]="filtroSerialKey"
          placeholder="Filtrar por serial key..."
          (input)="filtrarPaginas()"
        />
      </div>

      <div class="filtro-item">
        <label for="filtroTipo">Tipo</label>
        <select
          id="filtroTipo"
          [(ngModel)]="filtroTipo"
          (change)="filtrarPaginas()"
        >
          <option value="">Todos os tipos</option>
          <option value="photographer">FotÃ³grafo</option>
          <option value="restaurant">Restaurante</option>
          <option value="personal">Pessoal</option>
        </select>
      </div>

      <div class="filtro-item">
        <label>&nbsp;</label>
        <button (click)="resetarFiltros()" class="btn-resetar">
          ğŸ”„ Limpar Filtros
        </button>
        <button (click)="carregarPaginas()" class="btn-recargar">
          ğŸ”„ Recarregar
        </button>
      </div>
    </div>
  </div>


  <div *ngIf="erro" class="erro">
    âŒ {{ erro }}
    <button (click)="carregarPaginas()">Tentar novamente</button>
  </div>

  <!-- Tabela de PÃ¡ginas -->
  <div *ngIf="!carregando && !erro" class="tabela-container">
    <div class="tabela-header">
      <div class="resultados-info">
        Mostrando {{ paginasPaginaAtual.length }} de {{ paginasFiltradasContagem }} pÃ¡ginas
      </div>
      <div class="itens-por-pagina">
        <label for="itensPorPagina">Itens por pÃ¡gina:</label>
        <select
          id="itensPorPagina"
          [(ngModel)]="itensPorPagina"
          (change)="paginaAtual = 1; calcularPaginacao()"
        >
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
        </select>
      </div>
    </div>

    <div class="tabela-responsive">
      <table class="tabela">
        <thead>
          <tr>
            <th (click)="ordenar('nomeCartao')" class="ordenavel">
              Nome
              <span *ngIf="ordenarPor === 'nomeCartao'">
                {{ ordemAscendente ? 'â–²' : 'â–¼' }}
              </span>
            </th>
            <th (click)="ordenar('serialKey')" class="ordenavel">
              Serial Key
              <span *ngIf="ordenarPor === 'serialKey'">
                {{ ordemAscendente ? 'â–²' : 'â–¼' }}
              </span>
            </th>
            <th>Tipo</th>
            <th>Contatos</th>
            <th>Criado</th>
            <th>Deletar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let pagina of paginasPaginaAtual"
              [class.pagina-em-branco]="!pagina.nomeCartao && !pagina.instagram && !pagina.whatsapp">
            <td>
              <div class="nome-cartao" [class.vazio]="!pagina.nomeCartao">
                {{ pagina.nomeCartao || '(Sem nome)' }}
              </div>
            </td>
            <td>
              <div class="serial-key">
                <code>{{ pagina.serialKey }}</code>
                <button (click)="copiarSerialKey(pagina.serialKey)"
                        class="btn-copiar"
                        title="Copiar Serial Key">
                  ğŸ“‹
                </button>
              </div>
            </td>
            <td>
              <span class="badge" [class]="'tipo-' + (pagina.typePage || 'vazio')">
                {{ pagina.typePage || 'NÃ£o definido' }}
              </span>
            </td>
            <td>
              <div class="contatos">
                <span *ngIf="pagina.instagram" class="contato instagram" title="Instagram">ğŸ“¸</span>
                <span *ngIf="pagina.whatsapp" class="contato whatsapp" title="WhatsApp">ğŸ’¬</span>
                <span *ngIf="pagina.email" class="contato email" title="Email">ğŸ“§</span>
                <span *ngIf="pagina.facebook" class="contato facebook" title="Facebook">ğŸ‘</span>
                <span *ngIf="pagina.site" class="contato site" title="Site">ğŸŒ</span>
                <span *ngIf="!pagina.instagram && !pagina.whatsapp && !pagina.email" class="contato-vazio">
                  Nenhum
                </span>
              </div>
            </td>
            <td>
              <div class="data-criacao">
                {{ pagina.createdAt | date:'dd/MM/yyyy' }}
              </div>
            </td>
            <td>
              <div class="acoes">

                <button (click)="deletarPagina(pagina.id)"
                        class="btn-deletar"
                        title="Excluir pÃ¡gina"
                        *ngIf="pagina.id">
                  ğŸ—‘ï¸
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- PaginaÃ§Ã£o -->
    <div *ngIf="totalPaginas > 1" class="paginacao">
      <button (click)="mudarPagina(1)" [disabled]="paginaAtual === 1">
        â®ï¸
      </button>
      <button (click)="mudarPagina(paginaAtual - 1)" [disabled]="paginaAtual === 1">
        â—€ï¸
      </button>

      <span class="pagina-info">
        PÃ¡gina {{ paginaAtual }} de {{ totalPaginas }}
      </span>

      <button (click)="mudarPagina(paginaAtual + 1)" [disabled]="paginaAtual === totalPaginas">
        â–¶ï¸
      </button>
      <button (click)="mudarPagina(totalPaginas)" [disabled]="paginaAtual === totalPaginas">
        â­ï¸
      </button>
    </div>

    <!-- Mensagem quando nÃ£o hÃ¡ pÃ¡ginas -->
    <div *ngIf="paginasFiltradasContagem === 0" class="sem-resultados">
      <p>ğŸ“­ Nenhuma pÃ¡gina encontrada</p>
      <button (click)="resetarFiltros()">Limpar filtros</button>
    </div>
  </div>


</div>
